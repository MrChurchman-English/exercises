<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dependent Prepositions Exercise</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        h1 {
            text-align: center;
            color: #4a5568;
            margin-bottom: 30px;
            font-size: 2em;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background-color: #e2e8f0;
            border-radius: 4px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #48bb78, #38a169);
            transition: width 0.3s ease;
        }

        .round-info {
            text-align: center;
            margin-bottom: 25px;
            font-size: 1.1em;
            color: #2d3748;
        }

        .question {
            background: #f7fafc;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 20px;
            border-left: 4px solid #4299e1;
        }

        .question h3 {
            margin: 0 0 15px 0;
            color: #2d3748;
            font-size: 1.2em;
        }

        .sentence {
            font-size: 1.1em;
            line-height: 1.6;
            margin-bottom: 15px;
            color: #4a5568;
        }

        .blank {
            display: inline-block;
            min-width: 80px;
            border-bottom: 2px solid #4299e1;
            margin: 0 5px;
            padding: 2px 5px;
            font-weight: bold;
            color: #2b6cb0;
        }

        .input-group {
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
        }

        input[type="text"] {
            padding: 8px 12px;
            border: 2px solid #e2e8f0;
            border-radius: 6px;
            font-size: 1em;
            min-width: 100px;
            transition: border-color 0.3s ease;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #4299e1;
        }

        .check-btn {
            background: #4299e1;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.3s ease;
        }

        .check-btn:hover {
            background: #3182ce;
        }

        .feedback {
            margin-top: 10px;
            padding: 10px;
            border-radius: 6px;
            font-weight: bold;
        }

        .correct {
            background: #c6f6d5;
            color: #22543d;
        }

        .incorrect {
            background: #fed7d7;
            color: #742a2a;
        }

        .controls {
            text-align: center;
            margin-top: 30px;
        }

        .next-round-btn, .restart-btn {
            background: #48bb78;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            margin: 0 10px;
            transition: background-color 0.3s ease;
        }

        .next-round-btn:hover, .restart-btn:hover {
            background: #38a169;
        }

        .restart-btn {
            background: #e53e3e;
        }

        .restart-btn:hover {
            background: #c53030;
        }

        .score {
            text-align: center;
            font-size: 1.2em;
            margin: 20px 0;
            color: #2d3748;
        }

        .final-results {
            background: #e6fffa;
            border: 2px solid #38b2ac;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            margin: 20px 0;
        }

        .hint {
            font-size: 0.9em;
            color: #718096;
            font-style: italic;
            margin-top: 5px;
        }

        @media (max-width: 600px) {
            .container {
                padding: 20px;
            }
            
            .input-group {
                flex-direction: column;
                align-items: stretch;
            }
            
            input[type="text"] {
                min-width: auto;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Dependent Prepositions Exercise</h1>
        
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>
        
        <div class="round-info" id="roundInfo">
            Round 1 of ? - Question 1 of 10
        </div>
        
        <div class="score" id="scoreDisplay">
            Score: 0/0 (0%)
        </div>
        
        <div id="exerciseArea">
            <!-- Questions will be dynamically inserted here -->
        </div>
        
        <div class="controls">
            <button class="next-round-btn" id="nextRoundBtn" onclick="nextRound()" style="display: none;">
                Next Round
            </button>
            <button class="restart-btn" onclick="restartExercise()">
                Restart Exercise
            </button>
        </div>
    </div>

    <script>
        // Complete list of dependent prepositions with alternative answers
        const prepositions = [
            { phrase: "absent", preposition: ["from"], example: "She was absent ___ school yesterday." },
            { phrase: "absorbed", preposition: ["in"], example: "He was completely absorbed ___ his book." },
            { phrase: "account", preposition: ["for"], example: "How do you account ___ this strange behavior?" },
            { phrase: "accuse sb", preposition: ["of"], example: "They accused him ___ stealing." },
            { phrase: "accustomed", preposition: ["to"], example: "I'm not accustomed ___ this cold weather." },
            { phrase: "acquainted", preposition: ["with"], example: "Are you acquainted ___ the new manager?" },
            { phrase: "addicted", preposition: ["to"], example: "He's addicted ___ social media." },
            { phrase: "admire sb", preposition: ["for"], example: "I admire her ___ her courage." },
            { phrase: "advise", preposition: ["against"], example: "The doctor advised ___ smoking." },
            { phrase: "advise", preposition: ["on", "about"], example: "Can you advise me ___ this matter?" },
            { phrase: "afraid", preposition: ["of"], example: "She's afraid ___ spiders." },
            { phrase: "allow", preposition: ["for"], example: "We must allow ___ possible delays." },
            { phrase: "amazed", preposition: ["at", "by"], example: "I was amazed ___ his skill." },
            { phrase: "angry", preposition: ["at", "about"], example: "He was angry ___ the situation." },
            { phrase: "angry", preposition: ["with"], example: "She's angry ___ her brother." },
            { phrase: "annoyed", preposition: ["at", "about", "by"], example: "I'm annoyed ___ this constant noise." },
            { phrase: "annoyed", preposition: ["with"], example: "He's annoyed ___ his colleague." },
            { phrase: "answer", preposition: ["to"], example: "There's no easy answer ___ this problem." },
            { phrase: "anxious", preposition: ["about"], example: "She's anxious ___ her exam results." },
            { phrase: "apologize", preposition: ["for"], example: "He apologized ___ being late." },
            { phrase: "apply", preposition: ["to"], example: "This rule applies ___ everyone." },
            { phrase: "apply", preposition: ["for"], example: "She applied ___ the job." },
            { phrase: "approve", preposition: ["of"], example: "Do you approve ___ this plan?" },
            { phrase: "argue", preposition: ["for", "against"], example: "He argued ___ lower taxes." },
            { phrase: "argue", preposition: ["with"], example: "Don't argue ___ me!" },
            { phrase: "ashamed", preposition: ["of"], example: "He was ashamed ___ his behavior." },
            { phrase: "associate", preposition: ["with"], example: "I don't associate ___ those people." },
            { phrase: "attend", preposition: ["to"], example: "Please attend ___ this matter immediately." },
            { phrase: "attitude", preposition: ["towards", "toward"], example: "His attitude ___ work has changed." },
            { phrase: "authority", preposition: ["on"], example: "She's an authority ___ medieval history." },
            { phrase: "aware", preposition: ["of"], example: "Are you aware ___ the risks?" },
            { phrase: "awful", preposition: ["at"], example: "I'm awful ___ remembering names." },
            { phrase: "bad", preposition: ["at"], example: "He's bad ___ sports." },
            { phrase: "base sth", preposition: ["on"], example: "The movie is based ___ a true story." },
            { phrase: "charged", preposition: ["with"], example: "He was charged ___ theft." },
            { phrase: "beat sb", preposition: ["at"], example: "She beat me ___ chess." },
            { phrase: "benefit", preposition: ["from"], example: "You'll benefit ___ this experience." },
            { phrase: "blame sb", preposition: ["for"], example: "Don't blame me ___ this mess." },
            { phrase: "blame sth", preposition: ["on"], example: "He blamed his failure ___ bad luck." },
            { phrase: "boast", preposition: ["about", "of"], example: "He always boasts ___ his achievements." },
            { phrase: "bored", preposition: ["with", "by"], example: "I'm bored ___ this TV show." },
            { phrase: "capable", preposition: ["of"], example: "She's capable ___ great things." },
            { phrase: "charge", preposition: ["for"], example: "They don't charge ___ delivery." },
            { phrase: "choose", preposition: ["between"], example: "You must choose ___ the two options." },
            { phrase: "collide", preposition: ["with"], example: "The car collided ___ a tree." },
            { phrase: "concentrate", preposition: ["on"], example: "Please concentrate ___ your work." },
            { phrase: "concerned", preposition: ["about"], example: "I'm concerned ___ your health." },
            { phrase: "confess", preposition: ["to"], example: "He confessed ___ the crime." },
            { phrase: "confronted", preposition: ["with"], example: "When confronted ___ evidence, he admitted it." },
            { phrase: "confuse", preposition: ["with"], example: "Don't confuse me ___ my twin brother." },
            { phrase: "congratulate sb", preposition: ["on", "for"], example: "I congratulated her ___ her promotion." },
            { phrase: "control", preposition: ["over"], example: "He has no control ___ the situation." },
            { phrase: "convict", preposition: ["of"], example: "He was convicted ___ murder." },
            { phrase: "convince sb", preposition: ["of"], example: "I convinced him ___ the truth." },
            { phrase: "cruelty", preposition: ["towards", "toward"], example: "Cruelty ___ animals is unacceptable." },
            { phrase: "curious", preposition: ["about"], example: "I'm curious ___ your opinion." },
            { phrase: "deal", preposition: ["with"], example: "How do you deal ___ stress?" },
            { phrase: "decide", preposition: ["against", "on", "in favour of"], example: "We decided ___ buying the house." },
            { phrase: "depend", preposition: ["on"], example: "Success depends ___ hard work." },
            { phrase: "desperate", preposition: ["for"], example: "He's desperate ___ money." },
            { phrase: "deter", preposition: ["from"], example: "Nothing will deter me ___ achieving my goal." },
            { phrase: "devote sth", preposition: ["to"], example: "She devoted her life ___ helping others." },
            { phrase: "differ", preposition: ["from"], example: "My opinion differs ___ yours." },
            { phrase: "different", preposition: ["from", "to", "than"], example: "This is different ___ what I expected." },
            { phrase: "discuss sth", preposition: ["with"], example: "I need to discuss this ___ my manager." },
            { phrase: "distinguish sth", preposition: ["from"], example: "Can you distinguish fact ___ fiction?" },
            { phrase: "distinguish", preposition: ["between"], example: "I can't distinguish ___ the twins." },
            { phrase: "divide sth", preposition: ["into"], example: "Divide the cake ___ six pieces." },
            { phrase: "dream", preposition: ["about", "of"], example: "I dreamed ___ flying last night." },
            { phrase: "eager", preposition: ["for"], example: "He's eager ___ success." },
            { phrase: "effect", preposition: ["on"], example: "What effect did it have ___ you?" },
            { phrase: "elaborate", preposition: ["on"], example: "Could you elaborate ___ that point?" },
            { phrase: "example", preposition: ["of"], example: "This is a good example ___ teamwork." },
            { phrase: "exception", preposition: ["to"], example: "There's an exception ___ every rule." },
            { phrase: "explain sth", preposition: ["to"], example: "Can you explain this ___ me?" },
            { phrase: "faced", preposition: ["with"], example: "Faced ___ this challenge, what would you do?" },
            { phrase: "famous", preposition: ["for"], example: "Paris is famous ___ its cuisine." },
            { phrase: "fear", preposition: ["of"], example: "He has a fear ___ heights." },
            { phrase: "fond", preposition: ["of"], example: "I'm fond ___ classical music." },
            { phrase: "free", preposition: ["from", "of"], example: "The area is free ___ pollution." },
            { phrase: "glance", preposition: ["at"], example: "She glanced ___ her watch." },
            { phrase: "good", preposition: ["at"], example: "She's good ___ mathematics." },
            { phrase: "guess", preposition: ["about"], example: "I can only guess ___ his motives." },
            { phrase: "guilty", preposition: ["of"], example: "He was found guilty ___ fraud." },
            { phrase: "hope", preposition: ["of"], example: "There's little hope ___ success." },
            { phrase: "impatient", preposition: ["for"], example: "I'm impatient ___ the results." },
            { phrase: "impose", preposition: ["on"], example: "I don't want to impose ___ you." },
            { phrase: "incapable", preposition: ["of"], example: "He seems incapable ___ telling the truth." },
            { phrase: "insist", preposition: ["on"], example: "I insist ___ paying for dinner." },
            { phrase: "insure", preposition: ["against"], example: "We're insured ___ theft." },
            { phrase: "interested", preposition: ["in"], example: "Are you interested ___ art?" },
            { phrase: "investigation", preposition: ["into"], example: "There's an investigation ___ the accident." },
            { phrase: "involve sb", preposition: ["in"], example: "Don't involve me ___ your problems." },
            { phrase: "jealous", preposition: ["of"], example: "He's jealous ___ his brother's success." },
            { phrase: "keen", preposition: ["on"], example: "She's keen ___ photography." },
            { phrase: "know", preposition: ["about", "of"], example: "What do you know ___ this company?" },
            { phrase: "lack", preposition: ["of"], example: "There's a lack ___ information." },
            { phrase: "laugh", preposition: ["at", "about"], example: "Don't laugh ___ me!" },
            { phrase: "made for", preposition: ["for"], example: "This tool is made ___ cutting wood." },
            { phrase: "made from", preposition: ["from"], example: "Wine is made ___ grapes." },
            { phrase: "made out", preposition: ["of"], example: "The table is made out ___ wood." },
            { phrase: "made with", preposition: ["with"], example: "The cake is made ___ chocolate." },
            { phrase: "object", preposition: ["to"], example: "I object ___ this proposal." },
            { phrase: "objection", preposition: ["to"], example: "Do you have any objection ___ this plan?" },
            { phrase: "packed", preposition: ["with"], example: "The box is packed ___ books." },
            { phrase: "pay", preposition: ["for"], example: "Who's going to pay ___ this?" },
            { phrase: "persuade sb", preposition: ["of"], example: "I persuaded him ___ the importance of education." },
            { phrase: "plead", preposition: ["with"], example: "She pleaded ___ him to stay." },
            { phrase: "pleased", preposition: ["about", "with"], example: "I'm pleased ___ your progress." },
            { phrase: "prefer sth", preposition: ["to"], example: "I prefer tea ___ coffee." },
            { phrase: "prevent sb/sth", preposition: ["from"], example: "Nothing can prevent me ___ succeeding." },
            { phrase: "protect sb/sth", preposition: ["from"], example: "This cream protects your skin ___ the sun." },
            { phrase: "provide sb", preposition: ["with"], example: "Can you provide me ___ more information?" },
            { phrase: "ready", preposition: ["for"], example: "Are you ready ___ the exam?" },
            { phrase: "refer", preposition: ["to"], example: "What are you referring ___?" },
            { phrase: "relationship", preposition: ["with"], example: "He has a good relationship ___ his boss." },
            { phrase: "remind sb", preposition: ["of"], example: "This song reminds me ___ my childhood." },
            { phrase: "resign", preposition: ["from"], example: "He resigned ___ his position." },
            { phrase: "resigned", preposition: ["to"], example: "I'm resigned ___ my fate." },
            { phrase: "respect", preposition: ["for"], example: "I have great respect ___ her." },
            { phrase: "result", preposition: ["from"], example: "His success results ___ hard work." },
            { phrase: "result", preposition: ["in"], example: "This will result ___ disaster." },
            { phrase: "right", preposition: ["about"], example: "You were right ___ him." },
            { phrase: "room", preposition: ["for"], example: "There's no room ___ improvement." },
            { phrase: "safe", preposition: ["from"], example: "You're safe ___ harm here." },
            { phrase: "satisfied", preposition: ["with"], example: "Are you satisfied ___ the service?" },
            { phrase: "see", preposition: ["to"], example: "I'll see ___ the arrangements." },
            { phrase: "shocked", preposition: ["at", "by"], example: "I was shocked ___ the news." },
            { phrase: "solution", preposition: ["to", "for"], example: "What's the solution ___ this problem?" },
            { phrase: "sorry about", preposition: ["about"], example: "I'm sorry ___ the delay." },
            { phrase: "sorry for", preposition: ["for"], example: "I'm sorry ___ you." },
            { phrase: "specialize", preposition: ["in"], example: "He specializes ___ heart surgery." },
            { phrase: "succeed", preposition: ["in"], example: "She succeeded ___ passing the exam." },
            { phrase: "suffer", preposition: ["from"], example: "He suffers ___ allergies." },
            { phrase: "surprised", preposition: ["at", "by"], example: "I'm surprised ___ your reaction." },
            { phrase: "suspect sb", preposition: ["of"], example: "The police suspect him ___ theft." },
            { phrase: "sympathy", preposition: ["for"], example: "I have no sympathy ___ bullies." },
            { phrase: "take responsibility", preposition: ["for"], example: "Who will take responsibility ___ this mistake?" },
            { phrase: "tamper", preposition: ["with"], example: "Don't tamper ___ the evidence." },
            { phrase: "taste", preposition: ["of"], example: "This has a taste ___ garlic." },
            { phrase: "terrible", preposition: ["at"], example: "I'm terrible ___ directions." },
            { phrase: "translate sth", preposition: ["into"], example: "Please translate this ___ English." },
            { phrase: "trust", preposition: ["in"], example: "I have trust ___ the system." },
            { phrase: "trust sb", preposition: ["with"], example: "Can I trust you ___ this secret?" },
            { phrase: "typical", preposition: ["of"], example: "That's typical ___ him." },
            { phrase: "unaware", preposition: ["of"], example: "He was unaware ___ the danger." },
            { phrase: "upset", preposition: ["about", "over", "by"], example: "She's upset ___ losing her job." },
            { phrase: "used", preposition: ["to"], example: "I'm used ___ working late." },
            { phrase: "vote", preposition: ["against", "for"], example: "Who did you vote ___ in the election?" },
            { phrase: "worried", preposition: ["about"], example: "I'm worried ___ my daughter." },
            { phrase: "wrong", preposition: ["about"], example: "I was wrong ___ him." }
        ];

        let currentRound = 1;
        let currentQuestionIndex = 0;
        let currentRoundQuestions = [];
        let totalCorrect = 0;
        let totalQuestions = 0;
        let roundCorrect = 0;
        let usedPrepositions = [];
        let allAnswered = false;

        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        function getNextRoundQuestions() {
            const availablePrepositions = prepositions.filter(p => !usedPrepositions.includes(p));
            
            if (availablePrepositions.length === 0) {
                return null; // All prepositions used
            }
            
            const questionsNeeded = Math.min(10, availablePrepositions.length);
            const shuffled = shuffleArray(availablePrepositions);
            const selectedQuestions = shuffled.slice(0, questionsNeeded);
            
            // Add used prepositions to the tracking array
            usedPrepositions.push(...selectedQuestions);
            
            return selectedQuestions;
        }

        function initializeRound() {
            currentRoundQuestions = getNextRoundQuestions();
            
            if (!currentRoundQuestions) {
                showFinalResults();
                return;
            }
            
            currentQuestionIndex = 0;
            roundCorrect = 0;
            allAnswered = false;
            
            updateRoundInfo();
            updateProgressBar();
            displayQuestions();
        }

        function updateRoundInfo() {
            const totalRounds = Math.ceil(prepositions.length / 10);
            document.getElementById('roundInfo').textContent = 
                `Round ${currentRound} of ${totalRounds} - ${currentRoundQuestions ? currentRoundQuestions.length : 0} questions`;
        }

        function updateProgressBar() {
            const totalRounds = Math.ceil(prepositions.length / 10);
            const progress = ((currentRound - 1) / totalRounds) * 100;
            document.getElementById('progressFill').style.width = `${progress}%`;
        }

        function updateScore() {
            const percentage = totalQuestions > 0 ? Math.round((totalCorrect / totalQuestions) * 100) : 0;
            document.getElementById('scoreDisplay').textContent = 
                `Score: ${totalCorrect}/${totalQuestions} (${percentage}%)`;
        }

        function displayQuestions() {
            const exerciseArea = document.getElementById('exerciseArea');
            exerciseArea.innerHTML = '';
            
            currentRoundQuestions.forEach((item, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.innerHTML = `
                    <h3>Question ${index + 1}</h3>
                    <div class="sentence">
                        ${item.example.replace('___', '<span class="blank"></span>')}
                    </div>
                    <div class="input-group">
                        <input type="text" id="answer-${index}" placeholder="Enter preposition" autocomplete="off">
                        <button class="check-btn" onclick="checkAnswer(${index})">Check</button>
                    </div>
                    <div id="feedback-${index}" class="feedback" style="display: none;"></div>
                    <div class="hint">Phrase: <strong>${item.phrase}</strong></div>
                `;
                exerciseArea.appendChild(questionDiv);
                
                // Add enter key listener
                const input = questionDiv.querySelector(`#answer-${index}`);
                input.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        checkAnswer(index);
                    }
                });
            });
        }

        function checkAnswer(questionIndex) {
            const input = document.getElementById(`answer-${questionIndex}`);
            const feedback = document.getElementById(`feedback-${questionIndex}`);
            const userAnswer = input.value.trim().toLowerCase();
            const correctAnswers = currentRoundQuestions[questionIndex].preposition;
            
            // Check if already answered
            if (feedback.style.display !== 'none') {
                return;
            }
            
            // Don't allow checking if no answer is provided
            if (userAnswer === '') {
                return;
            }
            
            totalQuestions++;
            
            if (correctAnswers.includes(userAnswer)) {
                feedback.className = 'feedback correct';
                const allAnswers = correctAnswers.join(' / ');
                feedback.textContent = `âœ“ Correct! Possible answer${correctAnswers.length > 1 ? 's' : ''}: "${allAnswers}".`;
                feedback.style.display = 'block';
                input.style.borderColor = '#48bb78';
                totalCorrect++;
                roundCorrect++;
            } else {
                feedback.className = 'feedback incorrect';
                const allAnswers = correctAnswers.join(' / ');
                feedback.textContent = `âœ— Incorrect. Correct answer${correctAnswers.length > 1 ? 's' : ''}: "${allAnswers}".`;
                feedback.style.display = 'block';
                input.style.borderColor = '#e53e3e';
            }
            
            input.disabled = true;
            input.nextElementSibling.disabled = true;
            
            updateScore();
            
            // Check if all questions in this round are answered
            const allFeedbacks = document.querySelectorAll('.feedback');
            const visibleFeedbacks = Array.from(allFeedbacks).filter(f => f.style.display !== 'none');
            
            if (visibleFeedbacks.length === currentRoundQuestions.length && !allAnswered) {
                allAnswered = true;
                setTimeout(() => {
                    if (getNextRoundQuestions() !== null) {
                        document.getElementById('nextRoundBtn').style.display = 'inline-block';
                    } else {
                        showFinalResults();
                    }
                }, 1500);
            }
        }

        function nextRound() {
            // Reset used questions for next round
            usedPrepositions = usedPrepositions.slice(); // Keep all used questions
            currentRound++;
            document.getElementById('nextRoundBtn').style.display = 'none';
            initializeRound();
        }

        function showFinalResults() {
            const exerciseArea = document.getElementById('exerciseArea');
            const percentage = Math.round((totalCorrect / totalQuestions) * 100);
            
            let performanceText = '';
            if (percentage >= 90) performanceText = 'Excellent work! ðŸŒŸ';
            else if (percentage >= 80) performanceText = 'Well done! ðŸ‘';
            else if (percentage >= 70) performanceText = 'Good job! ðŸ‘';
            else if (percentage >= 60) performanceText = 'Not bad, but keep practicing! ðŸ“š';
            else performanceText = 'Keep studying and try again! ðŸ’ª';
            
            exerciseArea.innerHTML = `
                <div class="final-results">
                    <h2>ðŸŽ‰ Exercise Complete!</h2>
                    <p><strong>Final Score: ${totalCorrect}/${totalQuestions} (${percentage}%)</strong></p>
                    <p>${performanceText}</p>
                    <p>You completed ${currentRound - 1} rounds of dependent prepositions practice.</p>
                </div>
            `;
            
            document.getElementById('nextRoundBtn').style.display = 'none';
            document.getElementById('progressFill').style.width = '100%';
        }

        function restartExercise() {
            currentRound = 1;
            currentQuestionIndex = 0;
            totalCorrect = 0;
            totalQuestions = 0;
            roundCorrect = 0;
            usedPrepositions = [];
            allAnswered = false;
            
            document.getElementById('nextRoundBtn').style.display = 'none';
            updateScore();
            initializeRound();
        }

        // Initialize the exercise
        initializeRound();
    </script>
</body>
</html>
